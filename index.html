<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scientific calcultor</title>
<style>
/* central variables so theme can be updated in one place       */
  :root{
        --BC:#000000;
        --outer:#00ff41;
        --inner:#006400;
        --button_background:#111111;
        --button_text:#00ff41;
        --radius:14px;
  }  
  
  /* Page: Centers the calculator and gives it a neon frame. */
  body{
       margin: 0; 
       min-height: 100dvh;        
       display: grid;
       place-items: center;
       background: var(--BC);
       border: 12px solid var(--outer);
       box-sizing: border-box;
       font-family: -apple-system,Segoe UI,Roboto,Ubuntu,Calibri,Arial,sans-serif;
       color:var(--button_text)
  }
/* Responsive max width
Light interor for contrast with neon */
  .calc{
        position: relative;
        width:min(520px,92vw);
        background: #fafafa;
        padding: 28px 26px 30px;
        border: 6px solid var(--outer);
        border-radius: 20px;
  }
/* Decorative inner border ring for depth */
  .calc::after{
        content: "";
        position:absolute;
        inset:16px;
        border: 4px solid var(--inner);
        border-radius:14px;
        pointer-events:none;
  }
/* Title:centered,neon-colored */
  h1{
        margin:4px 0 18px;
        text-align:center;
        color:var(--outer);
        font-size: 1.6rem;
  }
/* DISPLAY: Read-only screen for resulsts/expression */
  .screen{
        height:48px;
        width:94%;
        padding:10px 14px;
        font-size: 1.05rem;
        border:2px solid var(--outer);
        border-radius: 8px;
        background:var(--button_text);
  }
  /* grid for all buttons-5 colums uniform */
  .grid{
    margin-top:18px;
    display:grid;
    grid-template-columns:repeat(5,1fr);
    gap:14px;    
  }
  /* buttons consistent look and feedback */
  button{
        border:2px solid var(--outer);
        background:var(--button_background);
        color: var(--button_text);
        border-radius:6px;
        padding:10px 0;
        font-size:1rem;
        line-height:1;
        cursor:pointer;
  }
  button:active{
        transform:translateY(1px);
  }
  .warn{
        background:#330000;
        border-color:#ff4d4d;
        color:#ff4d4d;
  }
  .ok{
        background:#001900;
        border-color: #00ff41;
        color:#00ff41;
  }
  .primary{
        background:#001933;
        color:#00ffff;
        border-color: #00ffff;
        font-weight:600;
  }
  .span-2{
        grid-column:span 2;
  }
  /* subtle glow for cyber-terminal  */
  button,.screen{
        box-shadow: 0 0 8px #00ff41, 0 0 16px #00ff41 inset;
  }
  h1,button{
        text-shadow: 0 0 1px #00ff41, 0 0 12px #00ff41;
  }
  button:hover{
        background: #000;
        color: #00ff41;
        box-shadow: 0 0 12px #00ff41, 0 0 24px #00ff41;
  }
  body{
        font-family: "Courier New", monospace;
  }
  
.mode-toggle{
  grid-column: 1 / -1;          
  display: flex;
  align-items: center;
  gap: 18px;                      
  margin: 4px 0 6px;
}

.mode-toggle label{
  display: inline-flex;
  align-items: center;
  gap: 8px;                      
  font-size: 0.95rem;
  color: var(--button_text);
}

.mode-toggle input[type="radio"]{
  accent-color: var(--outer);     
}


</style>
</head>
<body>
      <!-- Main calculator "device" container with accesible label -->
<main class="calc" aria-label="scientific calculator">
<h1>Scientific Calculator</h1>

<!-- Read-only display so all input is controlled via buttons -->
<input class="screen" type="text" value="0" aria-label="display" readonly>
<div class="grid" aria-hidden="true"> 

      <!-- Angle mode: deg or rad -->
  <div class="mode-toggle">
  <label for="deg">
    <input type="radio" name="mode" id="deg" checked>
    Deg
  </label>
  <label for="rad">
    <input type="radio" name="mode" id="rad">
    Rad
  </label>
</div>

  <!-- Top row:edit,confirm and navigation actions      -->
<button class="warn" id="btn-clear">Clear</button>
<button id="btn-cancel">Cancel</button>
<button class="ok span-2" id="btn-ok">Ok</button>
<button id="btn-graph">Graph</button>
<button class="primary" id="btn-ai">AI Helper</button>

<!-- Numeric/operators/functions keys are grouped -->
<button id="btn-log">log</button>
<button id="btn-7">7</button>
<button id="btn-8">8</button>
<button id="btn-9">9</button>
<button id="btn-divide">/</button>

<button id="btn-ln">ln</button>
<button id="btn-4">4</button>
<button id="btn-5">5</button>
<button id="btn-6">6</button>
<button id="btn-multiply">*</button>

<button id="btn-sqrt">sqrt</button>
<button id="btn-1">1</button>
<button id="btn-2">2</button>
<button id="btn-3">3</button>
<button id="btn-minus">-</button>

<button id="btn-sq">sq</button>
<button id="btn-0">0</button>
<button id="btn-dot">.</button>
<button id="btn-plus-minus">+/-</button>
<button id="btn-plus">+</button>

<button id="btn-left-bracket">(</button>
<button id="btn-sin">sin</button>
<button id="btn-cos">cos</button>
<button id="btn-tan">tan</button>
<button id="btn-right-bracket">)</button>

<button id="btn-sin-inv">sin⁻¹</button>
<button id="btn-cos-inv">cos⁻¹</button>
<button id="btn-tan-inv">tan⁻¹</button>
<button id="btn-pi">π</button>
<button id="btn-euler">e</button>

<button id="btn-power">^</button>
<button id="btn-percentage">%</button>
<button id="btn-redo">⟲</button>

<!-- spacer cells keep grid alignment -->
<span></span>
<span></span>

</div>
</main>

<script>

let str = "0";
const screen = document.querySelector(".screen");

function show(v) {str=v;screen.value=v;}
function add(ch) {

      // Avoid leading "0x" patterns
      if (str==="0") str = "";
      str += ch;
      screen.value = str;

}
function back(){
      // safe backspace : if last char removed, snap back to "0"
      if (str.length>1) {str = str.slice(0,-1); screen.value = str;}
      else {show("0");}
}

function clearAll(){show("0");}

// toggle affects the leading sign; avoids corrupting inner sub-expression
function toggleSign(){
      if (str.startsWith("-")) show(str.slice(1));
      else show("-" + str);
}

// Angle mode
function isDeg(){return document.getElementById("deg").checked;}
function toRad(x) {return x * Math.PI / 180;}
function toDeg(x) {return x * 180/ Math.PI;}


// normalisation, Translate student-friendly math into js-safe syntax
// route trig through wrappers so Deg/Rad is enforced uniformly
function normalize(expr){
      let e = expr;

      // Natural names - Math.*(logs,roots)
      e = e.replace(/ln\(/g, "Math.log(");
      e = e.replace(/log\(/g, "Math.log10(");
      e = e.replace(/sqrt\(/g, "Math.sqrt(");

      // Trig and Inverse trig ratios
      e = e.replace(/sin⁻¹\(/g, "ASIN(");
      e = e.replace(/cos⁻¹\(/g, "ACOS(");
      e = e.replace(/tan⁻¹\(/g, "ATAN(");
      e = e.replace(/sin\(/g, "SIN(");
      e = e.replace(/cos\(/g, "COS(");
      e = e.replace(/tan\(/g, "TAN(");

      // Operators and literals
      e = e.replace(/\^/g, "**"); 
      e = e.replace(/sq/g, "**2"); 
      e = e.replace(/(\d+(\.\d+)?)%/g, "($1/100)"); 

      // Math constants
      e = e.replace(/π/g, "Math.PI");
      e = e.replace(/\be\b/g, "Math.E");

      return e;
}

function calculate(){
      try{
      const jsExpr = normalize(str);

      // Environment expose approved functions
      const env = {
            Math,

            // Trig wrappers convert inputs/outputs depending on mode
            SIN:  (x) => isDeg() ? Math.sin(toRad(x)) : Math.sin(x),
            COS:  (x) => isDeg() ? Math.cos(toRad(x)) : Math.cos(x),
            TAN:  (x) => isDeg() ? Math.tan(toRad(x)) : Math.tan(x),
            ASIN:  (x) => isDeg() ?toDeg(Math.asin(x)):Math.asin(x),
            ACOS:  (x) => isDeg() ?toDeg(Math.acos(x)):Math.acos(x),
            ATAN:  (x) => isDeg() ?toDeg(Math.atan(x)):Math.atan(x)
      };

            // Execute expression "within" env only
            const out = Function("with(this){ return " + jsExpr + " }").call(env);
            show(String(out));
            }catch{
                  show("Error");
            }     
      }
for (let i=0; i<=9; i++){
      document.getElementById("btn-"+i).onclick = () => add(String(i));
}

// operators
document.getElementById("btn-plus").onclick = () => add("+");
document.getElementById("btn-minus").onclick = () => add("-");
document.getElementById("btn-multiply").onclick = () => add("*");
document.getElementById("btn-divide").onclick = () => add("/");
document.getElementById("btn-power").onclick = () => add("^");
document.getElementById("btn-percentage").onclick = () => add("%");


document.getElementById("btn-dot").onclick = () => add(".");
document.getElementById("btn-left-bracket").onclick = () => add(".");
document.getElementById("btn-right-bracket").onclick = () => add(")");
document.getElementById("btn-plus-minus").onclick = () => toggleSign;

// Functions
document.getElementById("btn-sqrt").onclick = () => add("sqrt(");
document.getElementById("btn-sq").onclick = () => add("sq");
document.getElementById("btn-log").onclick = () => add("log(");
document.getElementById("btn-ln").onclick = () => add("ln(");
document.getElementById("btn-sin").onclick = () => add("sin(");
document.getElementById("btn-cos").onclick = () => add("cos(");
document.getElementById("btn-tan").onclick = () => add("tan(");
document.getElementById("btn-sin-inv").onclick = () => add("sin⁻¹(");
document.getElementById("btn-cos-inv").onclick = () => add("cos⁻¹(");
document.getElementById("btn-tan-inv").onclick = () => add("tan⁻¹(");

// constants
document.getElementById("btn-pi").onclick = () => add("π");
document.getElementById("btn-euler").onclick = () => add("e");

document.getElementById("btn-clear").onclick = clearAll;
document.getElementById("btn-cancel").onclick  = back;
document.getElementById("btn-redo").onclick  = back;
document.getElementById("btn-ok").onclick  = calculate;

// Navigation (modular app: graphing and AI live as seperate pages)
document.getElementById("btn-graph").onclick = () => { window.location.href = "graph.html"; };
document.getElementById("btn-ai").onclick    = () => { window.location.href = "AI.html"; };

// initial point
show("0")



</script>

</body>
</html>